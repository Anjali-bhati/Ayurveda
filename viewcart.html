<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="viewcart.css">
    <link rel="icon" type="image/png" href="image/favicon_io/favicon-16x16.png">

</head>
<body>
    <header>
<nav class="navbar navbar-expand-lg navbar-light bg-light custom-navbar">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">
      <img id="logo-nav" src="image/logo.png" class="img-fluid" alt="logo">
    </a>
    <button class="navbar-toggler" type="button"
      data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ms-auto gap-1 me-3">
        <li class="nav-item me-3"><a class="nav-link text-black" href="Home.html">Home</a></li>
        <li class="nav-item me-3"><a class="nav-link text-black" href="About-Us.html">About Us</a></li>
        <li class="nav-item me-3"><a class="nav-link text-black" href="product.html">Shop</a></li>
        <li class="nav-item dropdown me-2">
          <a class="nav-link text-black" href="Myaccount.html">My Account
            <svg xmlns="http://www.w3.org/2000/svg" width="10" height="25" fill="currentColor" viewBox="0 0 16 16">
              <path fill-rule="evenodd"
                d="M1.553 6.776a.5.5 0 0 1 .67-.223L8 9.44l5.776-2.888a.5.5 0 1 1 .448.894l-6 3a.5.5 0 0 1-.448 0l-6-3a.5.5 0 0 1-.223-.67"/>
            </svg>
          </a>
          <ul class="dropdown-menu">
            <li><a href="Myaccount.html">Orders</a></li>
            <li><a href="Myaccount.html">Account details</a></li>
          </ul>
        </li>
        <li class="nav-item me-3"><a class="nav-link text-black" href="Contact-us.html">Contact Us</a></li>
       <li class="nav-item me-3" style="padding-left:15px;" data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions" aria-controls="offcanvasWithBothOptions">
        <a class="nav-link" style="color:#6AB04C;" href="#">
          ₹<span id="nav-total">0.00</span>
          <i class="bi bi-basket"></i>
          <span class="badge rounded-pill bg-success cart-badge" id="nav-count">0</span>
        </a>
      </li>
      </ul>
    </div>
  </div>
</nav>
</header>
<main>
<section>
  <div class="s1 container-fluid">
    <div class="row justify-content-center">
      <div class="s1box col-11 col-lg-10">
        <div id="product-container">
          <div class="container">
  <div class="row inside-row">

    <!-- LEFT : CART TABLE -->
    <div class="col-lg-8 col-12">
      <table class="table cart-table">
        <thead>
          <tr>
            <th></th>
            <th></th>
            <th>Product</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Subtotal</th>
          </tr>
        </thead>

        <tbody id="cart-body">
          <!-- JS se rows ayengi -->
        </tbody>
      </table>
    </div>

    <!-- RIGHT : CART TOTALS -->
    <div class="col-lg-4 col-12">
      <div class="cart-totals g-0">
        <h4 class="h4 p-lg-3 border-bottom mb-0">Cart totals</h4>

        <table class="me table mb-0">
          <tr>
            <th>Subtotal</th>
            <td id="subtotal">₹0</td>
          </tr>
          <tr>
            <th>Shipping</th>
            <td>
              <p>Flat rate: <b>₹8</b></p>
              <p>Shipping to <b>India</b></p>
              <a class="text-decoration-none a" href="#">Change address</a>
            </td>
          </tr>
          <tr>
            <th>Total</th>
            <td id="total">₹0</td>
          </tr>
        </table> 
        <div class="h4 p-3">
          <p class="p pt-3">Have a coupon ?</p>
          <a href="checkout.html" class="btn checkout-btn">Proceed to checkout</a>
        </div>
      
      </div>
    </div>

  </div>
</div>
        </div>
      </div>
    </div>
  </div>
</section>
</main>

<footer class="text-white">
  <div class="container d-flex flex-column text-center" style="min-height: 35vh;">
    <div class="d-flex justify-content-center align-items-center flex-grow-1 gap-3">
      <a href="#" class="bg-white p-2" style="color: #6AB04C;"><i class="bi bi-facebook"></i></a>
      <a href="#" class="bg-white p-2" style="color: #6AB04C;"><i class="bi bi-twitter"></i></a>
      <a href="#" class="bg-white p-2" style="color: #6AB04C;"><i class="bi bi-instagram"></i></a>
      <a href="#" class="bg-white p-2" style="color: #6AB04C;"><i class="bi bi-youtube"></i></a>
    </div>
    <p class="pb-5 mb-0">Copyright © 2025 Ayurveda | Powered by Ayurveda</p>
  </div>
</footer>
 
<script>

const cartBody = document.getElementById("cart-body");

function renderCart(){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  cartBody.innerHTML = "";

  if(cart.length === 0){

    const insideRow = document.querySelector(".inside-row");
    if(insideRow){
      insideRow.remove();
    }

    document.getElementById("product-container").innerHTML = `
      <div class="text-center p-5">
        <h4 id="carth4" class="mt-3"><i class="bi bi-cart-x-fill" style="font-size:40px;color:#8CBB00;"></i>
           Your cart is currently empty</h4>
        <button href="Shop1.html" class="btn button btn-success rounded-pill px-5 py-2 mt-3">
          Return to shop
        </button>
      </div>
    `;


    document.getElementById("nav-total").innerText = "0.00";
    document.getElementById("nav-count").innerText = "0";


    document.getElementById("subtotal").innerText = "₹0";
    document.getElementById("total").innerText = "₹0";

    return;
  }
  cart.forEach((item,i)=>{
   cartBody.innerHTML += `
<tr>
  <td data-label="">
    <button class="remove-btn" onclick="removeItem(${i})">×</button>
  </td>

  <td class="product-cell" data-label="">
    <img src="${item.img}">
  </td>

  <td data-label="Product">
    ${item.title}
  </td>

  <td data-label="Price">
    ₹${item.price}
  </td>

  <td data-label="Quantity">
    <div class="qty-box">
      <button onclick="changeQty(${i},-1)">−</button>
      <span>${item.qty}</span>
      <button onclick="changeQty(${i},1)">+</button>
    </div>
  </td>

  <td data-label="Subtotal">
    ₹${item.price * item.qty}
  </td>
</tr>
`;

  });

  updateTotal(cart);
}

function changeQty(i,val){
  let cart = JSON.parse(localStorage.getItem("cart"));
  if(cart[i].qty+val>=1){
    cart[i].qty += val;
    localStorage.setItem("cart",JSON.stringify(cart));
    renderCart();
  }
}

function removeItem(i){
  let cart = JSON.parse(localStorage.getItem("cart"));
  cart.splice(i,1);
  localStorage.setItem("cart",JSON.stringify(cart));
  renderCart();
}

function updateTotal(cart){
  let sub = cart.reduce((a,b)=>a + b.price * b.qty, 0);
  let total = sub + 8;

  document.getElementById("subtotal").innerText = "₹" + sub;
  document.getElementById("total").innerText = "₹" + total;

  document.getElementById("nav-total").innerText = sub.toFixed(2);
  document.getElementById("nav-count").innerText = cart.length;
}


renderCart();
</script>

    <script src="bootstrap/js/bootstrap.bundle.min.js"></script>
</body>
</html>